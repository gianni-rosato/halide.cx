class ImageSwitcher {
  constructor(t, i, s, e) {
    this.container = document.getElementById(t),
      this.images = i,
      this.subtitles = s,
      this.args = e,
      this.currentIndex = 0,
      this.init();
  }
  switchImage(t) {
    const i = this.buttonContainer.querySelectorAll(".switcher-button");
    i.forEach((s) => s.classList.remove("active")),
      i[t].classList.add("active"),
      this.currentIndex = t,
      this.imgElement.style.opacity = "0.7",
      this.imgElement.src = this.images[t],
      this.subtitleElement.textContent = this.subtitles[t],
      this.imgElement.onload = () => {
        this.imgElement.style.opacity = "1";
      };
  }
  init() {
    const t = document.createElement("div");
    t.className = "image-switcher-container",
      this.imgElement = document.createElement("img"),
      this.imgElement.src = this.images[0],
      this.imgElement.alt = "Iris WebP comparison",
      this.imgElement.loading = "lazy",
      this.imgElement.onerror = () => {
        console.warn("Failed to load image:", this.images[this.currentIndex]),
          this.subtitleElement.textContent = "Image failed to load";
      },
      this.subtitleElement = document.createElement("p"),
      this.subtitleElement.className = "image-caption",
      this.subtitleElement.textContent = this.subtitles[0],
      this.buttonContainer = document.createElement("div"),
      this.buttonContainer.className = "switcher-buttons",
      this.args.forEach((i, s) => {
        const e = document.createElement("button");
        e.textContent = i,
          e.className = "switcher-button",
          s === 0 && e.classList.add("active"),
          e.addEventListener("click", () => this.switchImage(s)),
          this.buttonContainer.appendChild(e);
      }),
      t.appendChild(this.imgElement),
      t.appendChild(this.subtitleElement),
      t.appendChild(this.buttonContainer),
      this.container.appendChild(t);
  }
}
document.addEventListener("DOMContentLoaded", function () {
  const n = document.getElementById("iris-switcher");
  if (n) {
    n.innerHTML = "";
    const t = [
        "/img/eos3-libwebp.webp",
        "/img/eos3-iris.webp",
        "/img/eos3-jpegli.jpg",
        "/img/eos3-source.png",
      ],
      i = [
        "113,446 bytes | 50.90 SSIMULACRA2 | 2.73 Butteraugli (3-norm, i203)",
        "113,450 bytes | 60.10 SSIMULACRA2 | 2.30 Butteraugli (3-norm, i203)",
        "113,678 bytes | 54.57 SSIMULACRA2 | 2.41 Butteraugli (3-norm, i203)",
        "1,532,759 bytes",
      ],
      s = ["libwebp", "Iris-WebP", "libjpegli", "Source"];
    try {
      new ImageSwitcher("iris-switcher", t, i, s);
    } catch (e) {
      console.error("Failed to initialize image switcher:", e),
        n.innerHTML = "<p>Failed to load image comparison tool.</p>";
    }
  }
});
